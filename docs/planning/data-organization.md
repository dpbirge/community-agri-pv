# Data Organization Specification

**Document Version**: 1.0
**Date**: 2026-02-02
**Status**: Draft for review

## Overview

This document defines the data folder structure for the community agri-PV model. The organization follows the three-layer computational architecture (Layer 1: Pre-computation, Layer 2: Design, Layer 3: Simulation) and distinguishes between time-series data (temporally indexed) and parameter data (static characteristics).

## Design Principles

1. **Layer-aligned structure**: Data organization mirrors the computational layers
2. **Time-series vs parameters**: Fundamentally different data types in separate locations
3. **Filename suffixes**: Use `-toy` or `-real` to indicate data source/quality
4. **Embedded metadata**: All data files include header comments with source, units, dependencies, logic
5. **Human-readable formats**: CSV for all data files
6. **Iterative improvement**: Start with toy data, progressively replace with researched estimates, then empirical/simulated data
7. **Code stability**: Structure matches how code will access data (no rewiring as we build)

## Top-Level Structure

```
data/
├── precomputed/        # Layer 1 outputs (pre-computed physical libraries)
├── parameters/         # Static parameters (Layer 2 design inputs)
├── prices/            # Historical price time-series (Layer 2 economic inputs)
└── README.md          # Data folder overview and usage guide
```

Scenario configurations and policy definitions live in:
```
settings/
├── scenarios/         # Scenario YAML files (Layer 2 outputs)
└── policies/          # Policy definitions (code + natural language docs)
```

Simulation outputs live in:
```
results/               # Layer 3 outputs (not in data/)
```

---

## Detailed Structure

### `data/precomputed/` - Layer 1 Outputs

Pre-computed physical libraries generated by Layer 1. These are indexed time-series and lookup tables that Layer 3 retrieves during simulation. All files are normalized (per-unit capacity or per-area) and deterministic given their inputs.

```
precomputed/
├── weather/
│   ├── daily_weather_scenario_001-toy.csv
│   ├── daily_weather_scenario_002-toy.csv
│   ├── daily_weather_scenario_003-toy.csv
│   └── daily_weather_scenario_001-real.csv       # Future: real historical data
│
├── pv_power/
│   └── pv_normalized_kwh_per_kw_daily-toy.csv   # Indexed by weather_scenario_id, date
│
├── wind_power/
│   └── wind_normalized_kwh_per_kw_daily-toy.csv # Indexed by weather_scenario_id, date
│
├── irrigation_demand/
│   ├── irrigation_m3_per_ha_tomatoes-toy.csv    # Indexed by weather_scenario_id, planting_date, crop_day
│   ├── irrigation_m3_per_ha_wheat-toy.csv
│   ├── irrigation_m3_per_ha_lettuce-toy.csv
│   ├── irrigation_m3_per_ha_cucumber-toy.csv
│   └── irrigation_m3_per_ha_melon-toy.csv
│
├── crop_yields/
│   ├── yield_kg_per_ha_tomatoes-toy.csv         # Indexed by weather_scenario_id, planting_date
│   ├── yield_kg_per_ha_wheat-toy.csv
│   ├── yield_kg_per_ha_lettuce-toy.csv
│   ├── yield_kg_per_ha_cucumber-toy.csv
│   └── yield_kg_per_ha_melon-toy.csv
│
├── water_treatment/
│   └── treatment_kwh_per_m3-toy.csv             # Indexed by salinity_level (brackish groundwater)
│
└── microclimate/
    └── pv_shade_adjustments-toy.csv             # Temperature and irradiance adjustments under agri-PV
```

#### Weather File Format Example

```csv
# SOURCE: Synthetic weather generator based on hot arid climate assumptions
# DATE: 2026-02-02
# DESCRIPTION: Daily weather data for scenario 001 - baseline hot arid year
# LOCATION: Generic hot arid region (future: Saudi Arabia, UAE, or US Southwest)
# UNITS: temp_max_c (Celsius), temp_min_c (Celsius), solar_irradiance_kwh_m2 (kWh/m²/day), wind_speed_ms (m/s), precip_mm (mm/day)
# LOGIC: Synthetic generation with seasonal patterns - low rainfall, high temps, high solar
# DEPENDENCIES: None (base input)
date,temp_max_c,temp_min_c,solar_irradiance_kwh_m2,wind_speed_ms,precip_mm,weather_scenario_id
2024-01-01,28,15,5.2,3.5,0.0,001
2024-01-02,29,16,5.4,3.2,0.0,001
2024-01-03,27,14,5.1,4.1,0.0,001
```

#### PV Power File Format Example

```csv
# SOURCE: pvlib calculations with synthetic weather data
# DATE: 2026-02-02
# DESCRIPTION: Normalized daily PV output per kW installed capacity
# UNITS: kwh_per_kw_per_day (kWh/kW/day)
# LOGIC: pvlib.ModelChain with fixed-tilt system, standard modules, temperature derating
# DEPENDENCIES: precomputed/weather/daily_weather_scenario_001-toy.csv, parameters/equipment/pv_systems-toy.csv
# ASSUMPTIONS: Fixed tilt 25°, azimuth 180° (south-facing), system losses 14%, temperature coefficient -0.4%/°C
weather_scenario_id,date,kwh_per_kw_per_day,capacity_factor
001,2024-01-01,4.2,0.175
001,2024-01-02,4.5,0.188
001,2024-01-03,4.1,0.171
```

#### Irrigation Demand File Format Example

```csv
# SOURCE: FAO Penman-Monteith ET0 calculation + crop coefficients
# DATE: 2026-02-02
# DESCRIPTION: Daily irrigation demand for tomatoes per hectare
# CROP: Tomato (Solanum lycopersicum)
# UNITS: m3_per_ha_per_day (cubic meters per hectare per day)
# LOGIC: Irrigation = ET0 * Kc * 10 (to convert mm to m³/ha)
# DEPENDENCIES: precomputed/weather/daily_weather_scenario_001-toy.csv, parameters/crops/crop_coefficients-toy.csv
# GROWTH_STAGES: initial (0-20 days), development (21-40), mid (41-100), late (101-130)
weather_scenario_id,planting_date,crop_day,growth_stage,kc,et0_mm,irrigation_m3_per_ha_per_day
001,2024-01-01,1,initial,0.60,5.2,31.2
001,2024-01-01,2,initial,0.60,5.4,32.4
001,2024-01-01,25,development,0.85,5.8,49.3
001,2024-01-01,50,mid,1.15,6.2,71.3
001,2024-01-01,110,late,0.80,5.5,44.0
```

---

### `data/parameters/` - Static Parameters

Static characteristics and lookup tables used by Layer 2 for design and by Layer 3 for simulation. These define physical properties, costs, and constraints but are not time-indexed.

```
parameters/
├── crops/
│   ├── crop_coefficients-toy.csv              # Kc by growth stage, root depth, growing season length
│   ├── growth_stages-toy.csv                  # Duration and water sensitivity by crop and growth stage
│   ├── processing_specs-toy.csv               # Energy, labor, weight loss, value-add by processing type
│   └── spoilage_rates-toy.csv                 # Percent per day by product type and storage condition
│
├── equipment/
│   ├── pv_systems-toy.csv                     # Module efficiency, temp coefficient, degradation, lifespan
│   ├── batteries-toy.csv                      # Capacity, charge/discharge efficiency, cycle life, DOD limits
│   ├── wind_turbines-toy.csv                  # Power curve parameters, cut-in/cut-out speeds, capacity
│   ├── water_treatment-toy.csv                # Desalination energy per m³, capacity, capex, opex
│   ├── processing_equipment-toy.csv           # Drying, canning equipment capacity, energy, costs
│   └── equipment_failure_rates-toy.csv        # MTBF, repair cost, downtime duration by equipment type
│
├── labor/
│   ├── labor_requirements-toy.csv             # Hours per hectare or per kg by activity type
│   └── labor_wages-toy.csv                    # Hourly wage by worker category (community, external)
│
├── community/
│   ├── farm_profiles-toy.csv                  # Farm size, yield factor, starting capital by profile type
│   └── land_allocation-toy.csv                # Total area, farmland, housing, buffer zones, solar arrays
│
└── costs/
    ├── capital_costs-toy.csv                  # Capex by equipment type ($/kW, $/kWh, $/m³/day, etc.)
    └── operating_costs-toy.csv                # Opex rates by equipment type ($/kW/year, etc.)
```

#### Crop Coefficients File Format Example

```csv
# SOURCE: FAO Irrigation and Drainage Paper 56 (FAO-56)
# DATE: 2026-02-02
# DESCRIPTION: Crop coefficients and growing characteristics
# UNITS: kc (dimensionless), root_depth_m (meters), season_length_days (days)
# LOGIC: Kc values from FAO-56 Table 12, adjusted for hot arid climate
# DEPENDENCIES: None (reference data)
# NOTES: Kc_initial for dry soil after planting, Kc_mid at full canopy, Kc_end at harvest
crop_name,kc_initial,kc_mid,kc_end,root_depth_m,season_length_days,water_stress_sensitivity
tomato,0.60,1.15,0.80,0.7,130,high
wheat,0.30,1.15,0.40,1.0,150,medium
lettuce,0.70,1.00,0.95,0.3,75,high
cucumber,0.60,1.00,0.75,0.7,105,high
melon,0.50,0.85,0.65,0.9,120,medium
```

#### Equipment Failure Rates File Format Example

```csv
# SOURCE: Industry reliability data and manufacturer specifications (toy estimates)
# DATE: 2026-02-02
# DESCRIPTION: Equipment failure rates and repair parameters
# UNITS: mtbf_hours (mean time between failures), repair_cost_usd (USD), downtime_days (days)
# LOGIC: Exponential failure distribution with MTBF, repair cost as percentage of capex
# DEPENDENCIES: parameters/costs/capital_costs-toy.csv
# NOTES: MTBF values are conservative estimates for hot, dusty environments
equipment_type,mtbf_hours,failure_probability_per_year,repair_cost_usd,downtime_days,maintenance_interval_days
pv_inverter,50000,0.175,1500,2,90
battery_system,30000,0.292,5000,3,180
water_pump,40000,0.219,800,1,30
treatment_plant,60000,0.146,3000,5,60
processing_equipment,35000,0.251,1200,2,30
```

---

### `data/prices/` - Historical Price Time-Series

Time-series price data for crops, processed goods, and inputs. These support both historical Monte Carlo runs (resampling actual sequences) and synthetic price generation (modulated by historical volatility).

```
prices/
├── crops/
│   ├── historical_tomato_prices-toy.csv
│   ├── historical_wheat_prices-toy.csv
│   ├── historical_lettuce_prices-toy.csv
│   ├── historical_cucumber_prices-toy.csv
│   └── historical_melon_prices-toy.csv
│
├── processed/
│   ├── historical_dried_tomato_prices-toy.csv
│   ├── historical_canned_tomato_prices-toy.csv
│   └── historical_wheat_flour_prices-toy.csv
│
├── electricity/
│   └── historical_grid_electricity_prices-toy.csv  # May include TOU structure
│
├── water/
│   └── historical_municipal_water_prices-toy.csv
│
└── diesel/
    └── historical_diesel_prices-toy.csv
```

#### Crop Price File Format Example

```csv
# SOURCE: USDA National Agricultural Statistics Service (toy approximation)
# DATE: 2026-02-02
# DESCRIPTION: Historical wholesale tomato prices with seasonal variation
# UNITS: usd_per_kg (USD per kilogram)
# LOGIC: Synthetic data with realistic seasonality - low at harvest peaks, high in off-season
# DEPENDENCIES: None (market data)
# SEASONALITY: Prices lowest June-August (peak harvest), highest December-February
# VOLATILITY: Year-to-year CV approximately 25%, driven by regional supply shocks
date,usd_per_kg,season,market_condition
2020-01-01,2.80,winter,high
2020-02-01,2.75,winter,high
2020-03-01,2.50,spring,medium
2020-06-01,1.80,summer,low
2020-09-01,2.20,fall,medium
2020-12-01,2.90,winter,high
2021-01-01,2.85,winter,high
```

#### Electricity Price File Format Example

```csv
# SOURCE: Regional utility rate schedules (toy approximation)
# DATE: 2026-02-02
# DESCRIPTION: Daily average grid electricity price with time-of-use structure
# UNITS: usd_per_kwh (USD per kilowatt-hour)
# LOGIC: Base rate + TOU premium during peak hours (16:00-20:00)
# DEPENDENCIES: None (utility data)
# STRUCTURE: off_peak (00:00-15:59), peak (16:00-20:00), off_peak (20:01-23:59)
# NOTES: Future versions may include demand charges and seasonal rate changes
date,usd_per_kwh_offpeak,usd_per_kwh_peak,usd_per_kwh_avg_daily,rate_schedule
2024-01-01,0.08,0.18,0.10,standard
2024-01-02,0.08,0.18,0.10,standard
2024-06-01,0.09,0.20,0.11,summer
2024-06-02,0.09,0.20,0.11,summer
```

---

## Metadata Standards

Every CSV file must include a header comment block with the following fields:

- **SOURCE**: Where the data came from (paper citation, database, generation method)
- **DATE**: When the file was created or last updated
- **DESCRIPTION**: What the data represents
- **UNITS**: Units for each numeric column
- **LOGIC**: Calculation method or generation algorithm
- **DEPENDENCIES**: Other files this data depends on
- **ASSUMPTIONS**: Key assumptions made in generating the data
- **NOTES**: Any additional context

For toy data, SOURCE should clearly state it is synthetic/approximated and reference any assumptions or target ranges used.

---

## Settings Organization

Scenario and policy configurations live outside `data/` in the `settings/` folder:

### `settings/scenarios/` - Scenario Configurations

Complete scenario specifications (Layer 2 outputs) that Layer 3 loads for simulation. Each YAML file defines infrastructure, community, policies, and references to data files.

**Example**: `settings/scenarios/baseline.yaml`

```yaml
# Baseline Scenario: Conservative community with moderate infrastructure
scenario_name: "baseline"
description: "Conservative pooling (15%), 70/30 groundwater/municipal, moderate PV (500 kW)"
created: "2026-02-02"
author: "dpbirge"

# Simulation configuration
simulation:
  start_date: "2024-01-01"
  duration_years: 20
  timestep: "daily"
  monte_carlo:
    enabled: false
    config_file: null  # Or path to monte_carlo config in settings/

# Layer 1 library selections
precomputed:
  weather_scenarios: ["001", "002", "003"]
  crops: ["tomatoes", "wheat", "lettuce"]

# Infrastructure specifications (Layer 2 design)
infrastructure:
  pv_capacity_kw: 500
  battery_capacity_kwh: 1000
  wind_capacity_kw: 0
  water_treatment_capacity_m3_day: 2000
  water_storage_capacity_m3: 500
  crop_storage_climate_controlled_m3: 500
  crop_storage_ambient_m3: 200
  processing_capacity_drying_kg_day: 1000
  processing_capacity_canning_kg_day: 500

# Community structure
community:
  num_farms: 20
  total_farmland_ha: 500
  total_area_km2: 25
  population: 150
  farm_profile_distribution:
    conservative: 0.40
    moderate: 0.40
    risk_tolerant: 0.20
  farm_profiles_file: "data/parameters/community/farm_profiles-toy.csv"
  land_allocation_file: "data/parameters/community/land_allocation-toy.csv"

# Policy selections (reference by name, defined in settings/policies/)
policies:
  water_policy: "balanced_gw_municipal_70_30"
  energy_policy: "pv_first_with_battery_buffering"
  crop_policy: "diversified_planting"
  economic_policy: "conservative_pooling_15pct"
  market_policy: "moderate_price_timing"

# Economic parameters
economic:
  discount_rate_real: 0.06
  debt_principal_usd: 500000
  debt_interest_rate: 0.045
  debt_term_years: 15
  inflation_rate: 0.00  # Real terms by default

# Data file references
data_files:
  crop_parameters: "data/parameters/crops/crop_coefficients-toy.csv"
  equipment_specs: "data/parameters/equipment/"
  price_data: "data/prices/"
  labor_data: "data/parameters/labor/"
```

### `settings/policies/` - Policy Definitions

Policy definitions with natural language descriptions and implementation in code. Users select policies by name in scenario files.

**Structure** (example):
```
settings/policies/
├── water_policies.py         # Water source allocation policies
├── energy_policies.py        # Energy dispatch and backup policies
├── crop_policies.py          # Planting, irrigation, harvest policies
├── economic_policies.py      # Pooling, debt, working capital policies
├── market_policies.py        # Sale timing and processing policies
└── README.md                 # Policy catalog and usage guide
```

**Example policy** (conceptual):

```python
# settings/policies/water_policies.py

class BalancedGwMunicipal7030:
    """
    Water Policy: Balanced Groundwater/Municipal (70/30)

    DESCRIPTION:
    Baseline allocation of 70% groundwater (with onsite desalination) and 30%
    municipal water. Switches to higher municipal usage if groundwater treatment
    costs exceed municipal prices by more than 20%.

    RATIONALE:
    Balances energy cost of desalination against municipal water price. Provides
    stability while allowing cost-based optimization.

    PARAMETERS:
    - baseline_gw_ratio: 0.70
    - baseline_municipal_ratio: 0.30
    - switch_threshold_pct: 0.20 (switch if gw_cost > municipal_cost * 1.20)
    """

    name = "balanced_gw_municipal_70_30"

    def __init__(self):
        self.baseline_gw_ratio = 0.70
        self.baseline_municipal_ratio = 0.30
        self.switch_threshold_pct = 0.20

    def allocate_water(self, demand_m3, gw_treatment_cost, municipal_cost, energy_available):
        """
        Determine water source allocation for a given day.

        Returns:
            tuple: (groundwater_m3, municipal_m3)
        """
        # Implementation here
        pass
```

---

## Data Quality Evolution Path

All datasets follow this iterative improvement path:

1. **Toy data** (`-toy` suffix): Generated synthetic data with reasonable assumptions
   - Purpose: Enable model development and testing
   - Quality: Order-of-magnitude correct, captures key patterns
   - Example: Weather with generic hot/arid seasonality

2. **Researched estimates** (`-toy` suffix initially): Literature-based parameter values
   - Purpose: Improve realism using published studies and benchmarks
   - Quality: Representative of real-world ranges, validated against multiple sources
   - Example: FAO crop coefficients, NREL PV performance data

3. **Real data** (`-real` suffix): Empirical measurements or validated simulations
   - Purpose: Location-specific accuracy for production runs
   - Quality: Actual historical data or high-fidelity simulations
   - Example: Historical weather from specific location, actual market price data

The `-toy` suffix is retained even for researched estimates until we have actual empirical data for that location/system. Files are overwritten in place as data quality improves (version control tracks history).

---

## Dataset Checklist

This checklist ensures all critical datasets identified in the model plan are captured:

### Precomputed (Layer 1 outputs)
- [x] Weather time-series (temperature, irradiance, wind, precipitation)
- [x] PV power normalized output
- [x] Wind power normalized output
- [x] Crop irrigation demand by crop type
- [x] Crop yields by crop type
- [x] Water treatment energy curves
- [x] Microclimate adjustments under agri-PV

### Parameters (Static characteristics)
- [x] Crop coefficients (Kc, growth stages, root depth)
- [x] Crop processing specifications (energy, labor, value-add, weight loss)
- [x] Spoilage rates by product and storage type
- [x] PV system specifications (efficiency, degradation, temp coefficients)
- [x] Battery specifications (efficiency, capacity, cycle life)
- [x] Wind turbine specifications (power curves)
- [x] Water treatment specifications (energy, capacity, costs)
- [x] Processing equipment specifications (capacity, energy, costs)
- [x] Equipment failure rates (MTBF, repair costs, downtime)
- [x] Labor requirements (hours per activity)
- [x] Labor wages (by worker category)
- [x] Farm profiles (sizes, yield factors, starting capital)
- [x] Community parameters (population, land allocation)
- [x] Capital costs (by equipment type)
- [x] Operating costs (by equipment type)

### Price Time-Series
- [x] Historical crop prices (raw products)
- [x] Historical processed product prices
- [x] Historical electricity prices (grid)
- [x] Historical municipal water prices
- [x] Historical diesel prices

### Settings (Configuration)
- [x] Scenario specifications (infrastructure, policies, simulation duration)
- [x] Policy definitions (water, energy, crop, economic, market)
- [x] Monte Carlo configurations (sampling strategies, shock scenarios)

---

## Usage Notes

### For Model Development

1. **Start with toy data**: Generate minimal synthetic datasets to get Layer 3 running
2. **Focus on structure first**: Ensure file formats and indexing work correctly
3. **Add complexity incrementally**: Start with 1 crop, 1 weather scenario, 1 year
4. **Validate at each step**: Check that data flows correctly through layers before expanding

### For Data Research

1. **Prioritize high-sensitivity parameters**: Focus real data research on weather, crop yields, prices
2. **Document sources meticulously**: Embed all metadata in file headers
3. **Version control everything**: Track data quality improvements over time
4. **Create data validation scripts**: Automated checks for units, ranges, consistency

### For Scenario Design

1. **Use descriptive names**: `high_solar_low_battery.yaml` is better than `scenario_03.yaml`
2. **Document rationale**: Explain why infrastructure/policy choices were made
3. **Reference policies by name**: Don't embed policy logic in scenario files
4. **Test incrementally**: Start with deterministic runs before Monte Carlo

---

## Project Specifications Summary

### Location and Context
- **Location**: Sinai Peninsula along the Red Sea, Egypt
- **Climate**: Hot, arid desert requiring year-round irrigation
- **Cropping**: Multiple growing seasons per year (2-3 seasons for fast crops, 1 for slower crops)
- **Community scale**: 20 farms, 500 hectares total farmland, ~150 population

### Crop Selection
1. **Tomato** - Multiple seasons/year, high value, export potential
2. **Potato** - Single season, staple crop, storage crop
3. **Onion** - Single season, staple crop, excellent storage
4. **Kale** (or hardy leafy vegetable) - Multiple seasons, nutritious, heat-tolerant
5. **Cucumber** - Multiple seasons, high export value, processing potential

### Time Series Parameters
- **Weather data**: Single scenario, 15 years (2010-2024) of synthetic data for Sinai Red Sea climate
- **Price data**: 10 years (2015-2024) where available from real sources, extend with synthetic
- **Alignment**: Real data where available, toy data to fill gaps

### Infrastructure Specifications

#### Irrigation
- **Technology**: Drip irrigation only (90% efficiency)
- **Design**: Extensible for future irrigation methods

#### Solar PV (Agri-PV)
- **Configuration**: Fixed-tilt, ~28° angle (mid-Sinai latitude)
- **Optimization**: Fall-spring peak output, reduced summer performance
- **Panel height**: 3 meters above crops
- **Density variants**:
  - High: 80% ground coverage (heavy shade)
  - Medium: 50% coverage (balanced)
  - Low: 30% coverage (light shade, maximum crop light)
- **Type**: Single panel type, three installation densities

#### Wind Turbines
- **Variants**: 3 representative microgrid-scale turbine sizes
- **Differentiation**: Different performance in varying wind conditions, different cost-benefit ratios
- **Focus**: Normalized power curves and costs

#### Diesel Generator
- **Baseline**: 100 kW unit (irrigation pumps + critical building loads)
- **Backup purpose**: Pumps and some building backup (not full community power)
- **Scalability**: Can add more units if needed

#### Water Systems
- **Sources**: Brackish groundwater (onsite desalination) + municipal water
- **Brackish salinity levels**: Model all three types with cost data
  - Light: 1,000-3,000 ppm TDS
  - Moderate: 3,000-10,000 ppm TDS
  - Heavy: 10,000+ ppm TDS
- **Baseline salinity**: 5,000 ppm TDS (moderate) for default scenarios

### Processing and Storage

#### Processing Types
1. **Fresh sales**: Local markets (no processing)
2. **Packaged fresh**: Export to Europe (cleaning, packaging, cold chain)
3. **Canned**: Preservation processing
4. **Dried/dehydrated**: Vegetable powder and dried products
5. **NO freezing**: Not modeled

#### Processing Capacity
- **Sizing basis**: Derived from peak harvest rates (e.g., drying sized to handle 10% of peak daily harvest)
- **Note**: Actual capacities determined by farm yields, not arbitrary values

### Economic Parameters

#### Currency
- **Primary**: USD for all model calculations
- **Documentation**: Original currency (EGP, EUR) documented with conversion rates and sources
- **Conversion**: Track exchange rates used for transparency

#### Labor
- **Wages**: Egyptian agricultural wages by activity type
- **Categories**:
  - Field work (planting, weeding, harvesting, irrigation)
  - Management and administration
  - Canning and processing operations
  - Packaging operations
  - Maintenance and logistics
- **Availability**: Unlimited labor (not a constraint), but costs tracked

#### Pricing
- **Crop prices**: Global food prices (FAO, USDA) as baseline
- **Export prices**: European market prices + shipping cost estimates
- **Electricity**: Egyptian agricultural electricity tariffs (researched)
- **Water**: Egyptian municipal water prices (researched)
- **Diesel**: Egyptian diesel prices (researched)

### Energy and Water Loads

#### Community Energy Demand
Model includes:
- **Irrigation pumps**: Primary load
- **Water treatment**: Desalination energy
- **Housing**: Small AC units, refrigerators, lighting (~150 people)
- **Processing facilities**: Canning, drying, packaging operations
- **Administrative buildings**: Offices, storage facilities
- **Farm equipment**: Hand-operated machinery (no tractors)

#### Community Water Demand
Model includes:
- **Irrigation**: Primary demand
- **Domestic**: Housing and sanitation (~150 people)
- **Processing**: Washing, canning, cleaning operations
- **Facilities**: Administrative building needs

### Grid Reliability
- **Modeling**: Price variations only (no brownouts/outages in initial model)
- **Tariff structure**: Agricultural rates, may include time-of-use if available
- **Future**: Can add outage modeling in later phases

### Data Sources Strategy
- **General approach**: Widely available global datasets for rapid initial development
- **Egyptian-specific priority**: Energy prices (electricity, diesel), water prices, labor wages
- **Quality evolution**: Toy → researched estimates → real data (iterative improvement)

### Monte Carlo Configuration
- **Location**: Separate `settings/monte_carlo/` folder
- **Initial phase**: NOT implemented yet - just run historical time series
- **Future**: Stochastic sampling, shock scenarios, uncertainty quantification

---

## Next Steps

1. **Create folder structure**: Set up empty directories and README files
2. **Generate initial toy datasets**: Start with minimal viable datasets (1 crop, 1 weather scenario)
3. **Define CSV schemas**: Create template files with proper metadata headers
4. **Build data validation tools**: Scripts to check units, ranges, required columns
5. **Create example scenario file**: Baseline configuration to test data loading
6. **Document policy definitions**: Write first policy implementation with natural language docs

---

## References

- Community Farm Model Specifications: `docs/planning/community-model-plan.md`
- FAO Irrigation and Drainage Paper 56: http://www.fao.org/3/x0490e/x0490e00.htm
- NREL PV Performance Data: https://www.nrel.gov/grid/solar-resource/
